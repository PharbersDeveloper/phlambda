<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Band Bars</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <style>
        .axis path,
        .axis line {
            stroke: teal;
            shape-rendering: crispEdges;
        }
        .axis text {
            font-family: Optima, Futura, sans-serif; font-weight: bold;
            font-size: 14px;
            fill: teal;
        }

        .line {
            fill: none;
            stroke: teal;
            stroke-width: 0.5;
        }
    </style>
</head>
<body>
<script type="text/javascript">
	const w = 500
	const h = 100

    const dataset = [
		[1958,3,315.71],
		[1958,4,317.45],
		[1958,5,317.5],
		[1958,6,-99.99],
		[1958,7,315.86],
		[1958,8,314.93],
		[1958,9,313.2],
		[1958,10,-99.99],
		[1958,11,313.3],
		[1958,12,314.6],
		[1959,1,315.62],
		[1959,2,316.38],
		[1959,3,316.71],
		[1959,4,317.72],
		[1959,5,318.29],
		[1959,6,318.15],
		[1959,7,316.54],
		[1959,8,314.8],
		[1959,9,313.84],
		[1959,10,313.2],
		[1959,11,314.8],
		[1959,12,315.5],
		[1960,1,316.43],
		[1960,2,316.97],
		[1960,3,317.58],
		[1960,4,319.02],
		[1960,5,320.03],
		[1960,6,319.59],
		[1960,7,318.18],
		[1960,8,315.91],
		[1960,9,314.16],
		[1960,10,313.8],
		[1960,11,315.0],
		[1960,12,316.1],
		[1961,1,316.93],
		[1961,2,317.7],
		[1961,3,318.54],
		[1961,4,319.48],
		[1961,5,320.58],
		[1961,6,319.77],
		[1961,7,318.57],
		[1961,8,316.79],
		[1961,9,314.8],
		[1961,10,315.3],
		[1961,11,316.1],
		[1961,12,317.0],
		[1962,1,317.94],
		[1962,2,318.56],
		[1962,3,319.68],
		[1962,4,320.63],
		[1962,5,321.01],
		[1962,6,320.55],
		[1962,7,319.58],
		[1962,8,317.4],
		[1962,9,316.26],
		[1962,10,315.4],
		[1962,11,316.6],
		[1962,12,317.6],
		[1963,1,318.74],
		[1963,2,319.08],
		[1963,3,319.86],
		[1963,4,321.39],
		[1963,5,322.25],
		[1963,6,321.47],
		[1963,7,319.74],
		[1963,8,317.77],
		[1963,9,316.21],
		[1963,10,315.9],
		[1963,11,317.1],
		[1963,12,318.3],
		[1964,1,319.57],
		[1964,2,-99.99],
		[1964,3,-99.99],
		[1964,4,-99.99],
		[1964,5,322.25],
		[1964,6,321.89],
		[1964,7,320.44],
		[1964,8,318.7],
		[1964,9,316.7],
		[1964,10,316.7],
		[1964,11,317.7],
		[1964,12,318.7],
		[1965,1,319.44],
		[1965,2,320.44],
		[1965,3,320.89],
		[1965,4,322.13],
		[1965,5,322.16],
		[1965,6,321.87],
		[1965,7,321.39],
		[1965,8,318.81],
		[1965,9,317.81],
		[1965,10,317.3],
		[1965,11,318.8],
		[1965,12,319.4],
		[1966,1,320.62],
		[1966,2,321.59],
		[1966,3,322.39],
		[1966,4,323.87],
		[1966,5,324.01],
		[1966,6,323.75],
		[1966,7,322.39],
		[1966,8,320.37],
		[1966,9,318.64],
		[1966,10,318.1],
		[1966,11,319.7],
		[1966,12,321.0],
		[1967,1,322.07],
		[1967,2,322.5],
		[1967,3,323.04],
		[1967,4,324.42],
		[1967,5,325.0],
		[1967,6,324.09],
		[1967,7,322.55],
		[1967,8,320.92],
		[1967,9,319.31],
		[1967,10,319.3],
		[1967,11,320.7],
		[1967,12,321.9],
		[1968,1,322.57],
		[1968,2,323.15],
		[1968,3,323.89],
		[1968,4,325.02],
		[1968,5,325.57],
		[1968,6,325.36],
		[1968,7,324.14],
		[1968,8,322.03],
		[1968,9,320.41],
		[1968,10,320.2],
		[1968,11,321.3],
		[1968,12,322.8],
		[1969,1,324.0],
		[1969,2,324.42],
		[1969,3,325.64],
		[1969,4,326.66],
		[1969,5,327.34],
		[1969,6,326.76],
		[1969,7,325.88],
		[1969,8,323.67],
		[1969,9,322.38],
		[1969,10,321.7],
		[1969,11,322.8],
		[1969,12,324.1],
		[1970,1,325.03],
		[1970,2,325.99],
		[1970,3,326.87],
		[1970,4,328.13],
		[1970,5,328.07],
		[1970,6,327.66],
		[1970,7,326.35],
		[1970,8,324.69],
		[1970,9,323.1],
		[1970,10,323.1],
		[1970,11,323.9],
		[1970,12,325.1],
		[1971,1,326.17],
		[1971,2,326.68],
		[1971,3,327.18],
		[1971,4,327.78],
		[1971,5,328.92],
		[1971,6,328.57],
		[1971,7,327.34],
		[1971,8,325.46],
		[1971,9,323.36]
	].map(d => {
        return {
			date: new Date(+d[0], (+d[1]- 1)),
			average: d[2]
		}
	})

    const xScale =
        d3.scaleTime()
            .domain([d3.min(dataset, d => d.date), d3.max(dataset, d => d.date)])
            .range([0,w])

    const yScale =
		d3.scaleLinear()
			.domain([d3.min(dataset, d => d.average), d3.max(dataset, d => d.average)])
			.range([h,0])

    const svg =
        d3.select("body")
            .append("svg")
            .attr("width", w)
			.attr("height", h)

	//Define line generator
	var line = d3.line()
		.x(d => xScale(d.date))
		.y(d => yScale(d.average))

    svg.append("path")
        .datum(dataset)
        .attr("class", "line")
		.attr("d", line)

	const xAxis = d3.axisBottom().scale(xScale)
	svg.append("g")
		.attr("class", "axis")
		.attr("transform", "translate(0," + (h - 25) + ")")
		.call(xAxis)

	const yAxis = d3.axisLeft().scale(yScale)
	svg.append("g")
		.attr("class", "axis")
		.attr("transform", "translate(35, -2)")
		.call(yAxis)
</script>
</body>
</html>
